# HOW TO INSTALL MONGO DB ON LINUX MACHINES.
### LINUX 9 Stretch


Following the neccesary code to install MondoDB on your Linux 9 Stretch machine. The documentation on their official website those not appear neither help you install it on this version. Here is the neccesary commands and tools for MongoDB to work.


Some basic Git commands are:
```
sudo apt-get install git-all -y
```
Install Node 9
```
curl -sL https://deb.nodesource.com/setup_9.x | sudo -E bash -
sudo apt-get install -y nodejs
```

Get your and get it from the official Mongo Docs in the following link:
https://docs.mongodb.com/v3.4/tutorial/install-mongodb-on-debian/#

Some basic Git commands are:
YOUR-MONGODB-PUBLIC-KEY is a unique key that is automatically genereated for you when you visit link above. It is secure and generated by Mongo for you.

```
sudo apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv YOUR-MONGODB-PUBLIC-KEY-THAT-YOU-CAN-FIND-IN-THE-LINK-ABOVE
```

It you get an error that those not print something like:
```
gpg: key YOUR-MONGODB-PUBLIC-KEY-THAT-YOU-CAN-FIND-IN-THE-LINK-ABOVE: "MongoDB 3.4 Release Signing Key <packaging@mongodb.com>" not changed
gpg: Total number processed: 1
gpg:              unchanged: 1
```

Create the directory the terminal tells you to create and also install:

```
sudo apt remove gnupg
sudo apt install --reinstall gnupg2 (possibly not necessary, but doesn't hurt)
sudo apt install dirmngr
```

Run again in case you got an error:
```
sudo apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv YOUR-MONGODB-PUBLIC-KEY-THAT-YOU-CAN-FIND-IN-THE-LINK-ABOVE
```

Paste the following link in ther terminal:
```
echo "deb http://repo.mongodb.org/apt/debian jessie/mongodb-org/3.4 main" | sudo tee /etc/apt/sources.list.d/mongodb-org-3.4.list
```

 If we run `sudo apt-get` after this we get an error with:

 ```
 The following packages have unmet dependencies:
 mongodb-org : Depends: mongodb-org-shell but it is not going to be installed
               Depends: mongodb-org-server but it is not going to be installed
               Depends: mongodb-org-mongos but it is not going to be installed
               Depends: mongodb-org-tools but it is not going to be installed
E: Unable to correct problems, you have held broken packages.
```

To solve this we just have to update adding jessie-backports
```
echo "deb http://ftp.debian.org/debian jessie-backports main" | sudo tee /etc/apt/sources.list
```

Reload local package database.
```
sudo apt-get update
```

Finally, install MongoDB:
```
sudo apt-get install -y mongodb-org
```

Start Mongo:
```
sudo service mongod start
```

Verify that MongoDB has started successfully

Verify that the mongod process has started successfully by checking the contents of the log file at /var/log/mongodb/mongod.log for a line reading
```
[initandlisten] waiting for connections on port <port>
where <port> is the port configured in /etc/mongod.conf, 27017 by default.
```

Restart Mongo:
```
sudo service mongod restart
```

Set credentials and create the file:

Add this directory:
```
mkdir -p /data/db
```
Give read and write permissions only to user:
```
sudo chmod 0755 /data/db && sudo chown -R $USER /data/db
```

Finally:

Stop Mongo:
```
sudo service mongod stop
```

Start Mongo with the following command:
```
mongod
```



### Notes


If error keeps persisting try:

Install aptitude
```
sudo apt-get install aptitude
```

Install with aptitude mongodb
```
sudo aptitude install mongodb-org
```
